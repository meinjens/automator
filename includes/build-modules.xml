<?xml version="1.0"?>
<!DOCTYPE project>

<project name="build-modules">

	<!-- ================================= 
          target: clean              
         ================================= -->
    <target name="clean" description="Clean all modules">
		<antcall target="loop-modules">
			<param name="loop.modules.cmd" value="module-clean" />
		</antcall>
    </target>

	
	<!-- ================================= 
          target: prepare              
         ================================= -->
    <target name="prepare" description="Initialize all modules">
		<antcall target="loop-modules">
			<param name="loop.modules.cmd" value="module-prepare" />
		</antcall>
    </target>

	
	<!-- ================================= 
          target: create-config              
         ================================= -->
    <target name="create-config" description="Create configs for all modules">
		<antcall target="loop-modules">
			<param name="loop.modules.cmd" value="module-create-config" />
		</antcall>
    </target>
	
	
	<!-- ================================= 
          target: download-package
         ================================= -->
    <target name="download-package" description="Download package for all modules">
		<antcall target="loop-modules">
			<param name="loop.modules.cmd" value="module-download-package" />
		</antcall>
    </target>
	
	
	<!-- ================================= 
          target: install
         ================================= -->
    <target name="install" description="Initialize all modules">
		<antcall target="loop-modules">
			<param name="loop.modules.cmd" value="module-install" />
		</antcall>
    </target>
	
	
	<!-- ================================= 
          target: show-module-properties
         ================================= -->
    <target name="show-module-properties" description="Display propertier of all modules">
		<antcall target="loop-modules">
			<param name="loop.modules.cmd" value="module-show-properties" />
		</antcall>
    </target>
	
	
	<!-- - - - - - - - - - - - - - - - - - 
          target: loop-modules                      
         - - - - - - - - - - - - - - - - - -->
    <target name="loop-modules">
    	<for param="module" list="${system.modules}">
    		<sequential>
				<echo>Executing module @{module} with target ${loop.modules.cmd}.</echo>
				<ant antfile="${automator.dir}/modules/@{module}/module.xml" target="${loop.modules.cmd}" inheritrefs="true" />
    		</sequential> 
    	</for>
    </target>

</project>