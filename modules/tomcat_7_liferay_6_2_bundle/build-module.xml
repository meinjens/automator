<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE project>

<project name="automator.module.tomcat_7_liferay_6_2_bundle">

	<!-- - - - - - - - - - - - - - - - - - 
          target: static properties                      
         - - - - - - - - - - - - - - - - - -->
	<property name="module.tomcat_7_liferay_6_2_bundle.dir" value="${automator.dir}/modules/tomcat_7_liferay_6_2_bundle" />
	
	
	<!-- - - - - - - - - - - - - - - - - - 
          target: module-init                      
         - - - - - - - - - - - - - - - - - -->
    <target name="module-init">
    	<property file="${module.tomcat_7_liferay_6_2_bundle.dir}/module.properties" />

    	<property name="module.tomcat_7_liferay_6_2_bundle.build.dir" value="${module.tomcat_7_liferay_6_2_bundle.dir}/${automator.module.build.dir}" />
    	<property name="module.tomcat_7_liferay_6_2_bundle.download.dir" value="${module.tomcat_7_liferay_6_2_bundle.dir}/${automator.module.download.dir}" />
    	<property name="module.tomcat_7_liferay_6_2_bundle.diff.dir" value="${module.tomcat_7_liferay_6_2_bundle.dir}/${automator.module.diff.dir}" />
    </target>

	
	<!-- ================================= 
          target: module-clean              
         ================================= -->
    <target name="module-clean" depends="module-init" description="Clean temporary files for the module">
    	<delete dir="${module.tomcat_7_liferay_6_2_bundle.build.dir}" includeemptydirs="true" />
    </target>
	
	
	<!-- ================================= 
          target: module-download-prerequisites              
         ================================= -->
    <target name="module-download-prerequisites" depends="module-init" description="Download prerequisites from the internet">
    	<delete dir="${module.tomcat_7_liferay_6_2_bundle.download.dir}" includeemptydirs="true" />
    	<mkdir dir="${module.tomcat_7_liferay_6_2_bundle.download.dir}" />
    	
    	<get dest="${module.tomcat_7_liferay_6_2_bundle.download.dir}" src="${module.tomcat_7_liferay_6_2_bundle.download.url}" />
    </target>

	
	<!-- ================================= 
          target: module-prepare              
         ================================= -->
    <target name="module-prepare" depends="module-init" description="Prepare module for build">
    	<mkdir dir="${module.tomcat_7_liferay_6_2_bundle.build.dir}" />
    </target>
	
	
	<!-- ================================= 
          target: module-build              
         ================================= -->
    <target name="module-build" depends="module-init" description="Build module">
		<!--<antcall target="unzip-package" inheritrefs="true" />-->
		<antcall target="copy-module-files" inheritrefs="true" />
    </target>
	
	
	<!-- - - - - - - - - - - - - - - - - - 
          target: unzip-package                      
         - - - - - - - - - - - - - - - - - -->
    <target name="unzip-package">
    	<unzip dest="${module.tomcat_7_liferay_6_2_bundle.build.dir}">
    		<fileset dir="${module.tomcat_7_liferay_6_2_bundle.download.dir}" includes="*.zip" />
    	</unzip>
    </target>
	
	
	<!-- - - - - - - - - - - - - - - - - - 
          target: copy-module-files                      
         - - - - - - - - - - - - - - - - - -->
    <target name="copy-module-files">
    	<echo>Copying binary files...</echo>
		<copy todir="${module.tomcat_7_liferay_6_2_bundle.build.dir}" overwrite="true" includeemptydirs="false">
			<fileset dir="${module.tomcat_7_liferay_6_2_bundle.diff.dir}" excludes="${module.tomcat_7_liferay_6_2_bundle.config.files}" />
		</copy>
    	
    	<echo>Copying configuration files...</echo>
		<copy todir="${module.tomcat_7_liferay_6_2_bundle.build.dir}" includeemptydirs="true" overwrite="true">
			<fileset dir="${module.tomcat_7_liferay_6_2_bundle.diff.dir}" includes="${module.tomcat_7_liferay_6_2_bundle.config.files}" />
			<filterset>
				<filtersfile file="${automator.dir}/${module.tomcat_7_liferay_6_2_bundle.dir}/module.properties" />
			</filterset>
			<filterset refid="filter.all" />
		</copy>            
    </target>
	
	
	<!-- ================================= 
          target: module-show-properties              
         ================================= -->
    <target name="module-show-properties" depends="module-init" description="description">
    	<echoproperties prefix="module.tomcat_7_liferay_6_2_bundle"></echoproperties>
    </target>

	
</project>